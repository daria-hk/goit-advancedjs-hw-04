{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '46483987-c8443b8397d1fa46fa83b5f89';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nasync function getImg(searchValue) {\n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        q: searchValue,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\"\n    });\n\n    try {\n        const res = await axios.get(`?${searchParams.toString()}`);\n\n        return res.data;\n    } catch (error) {\n        console.error( error);\n        throw error;\n    }\n}\n\nexport { getImg };\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryLightbox;\n\nfunction createCardsMarkup(cards) {\n  const cartItem = cards\n    .map(\n      ({ tags, webformatURL, largeImageURL, likes, views, comments, downloads }) => `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"values-container\">\n                <ul class=\"labels\">\n                    <li>Likes</li>\n                    <li>${likes}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Views</li>\n                    <li>${views}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Comments</li>\n                    <li>${comments}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Downloads</li>\n                    <li>${downloads}</li>\n                </ul>\n            </div>\n        </a>\n      </li>`\n    )\n    .join('');\n    \n    loadSimpleLitebox(cartItem);\n}\n\nfunction loadSimpleLitebox(cartItem) {\n    const gallery = document.querySelector(\"ul.images-div\");\n    gallery.innerHTML = cartItem; \n\n    if (galleryLightbox) {\n        galleryLightbox.refresh();\n    } else {\n        galleryLightbox = new SimpleLightbox(\".images-div a\", {\n        captionsData: \"alt\",\n        captionDelay: 250,\n        });\n    }\n}\n\nexport { createCardsMarkup };\n","import { getImg } from \"./js/pixabay-api\";\nimport { createCardsMarkup } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst fetchUsersBtn = document.querySelector(\"input[type=submit]\");\nconst imgs = document.querySelector(\".images-div\");\nconst loaderClass = document.querySelector(\".loaderClass\");\n\nfetchUsersBtn.addEventListener(\"click\", handleSearch);\n\nasync function handleSearch(evt) {\n  evt.preventDefault();\n  let searchInput = document.querySelector('input[name=\"search\"]');\n  let notFoundTextEl = document.querySelector(\".not-found-el\");\n  let searchValue = searchInput.value.trim();\n\n  if (searchValue <= 0) {\n    iziToast.show({\n      title: \"Error\",\n      message:\n        \"Sorry, there are no images matching your search query. Please try again!\",\n      color: \"red\",\n    });\n    return;\n  }\n\n  loaderClass.style.display = \"flex\";\n\n  try {\n    const data = await getImg(searchValue);\n\n    if (data.total === 0) {\n      imgs.innerHTML = \"\";\n      notFoundTextEl.innerHTML = `Results for query <span>${searchValue}</span> not found!`;\n      iziToast.show({\n        title: \"Error\",\n        message:\n          \"Sorry, there are no images matching your search query. Please try again!\",\n        backgroundColor: \"#B51B1B\",\n        messageColor: \"white\",\n        titleColor: \"yellow\",\n      });\n      return;\n    }\n\n    createCardsMarkup(data.hits);\n\n      const imageElements = document.querySelectorAll(\".gallery-img\");\n      const loadPromises = Array.from(imageElements).map((img) => {\n        return new Promise((resolve) => {\n          img.onload = resolve;\n          img.onerror = resolve;\n        });\n      });\n\n      Promise.all(loadPromises)\n        .then(() => {\n          console.log(loadPromises);\n        })\n        .catch((err) => {\n          loaderClass.innerHTML = \"\";\n          console.error(err);\n        });\n\n  } catch(err) {\n    console.log(err);\n  } finally{\n      console.log(\"completed\");\n      loaderClass.style.display = \"none\";\n  };\n}\n"],"names":["API_KEY","axios","getImg","searchValue","searchParams","error","galleryLightbox","createCardsMarkup","cards","cartItem","tags","webformatURL","largeImageURL","likes","views","comments","downloads","loadSimpleLitebox","gallery","SimpleLightbox","fetchUsersBtn","imgs","loaderClass","handleSearch","evt","searchInput","notFoundTextEl","iziToast","data","imageElements","loadPromises","img","resolve","err"],"mappings":"owBAEA,MAAMA,EAAU,qCAEhBC,EAAM,SAAS,QAAU,0BAEzB,eAAeC,EAAOC,EAAa,CAC/B,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,EAED,GAAI,CAGA,OAFY,MAAMF,EAAM,IAAI,IAAIG,EAAa,UAAU,EAAE,GAE9C,IACd,OAAQC,EAAO,CACZ,cAAQ,MAAOA,CAAK,EACdA,CACT,CACL,CCpBA,IAAIC,EAEJ,SAASC,EAAkBC,EAAO,CAChC,MAAMC,EAAWD,EACd,IACC,CAAC,CAAE,KAAAE,EAAM,aAAAC,EAAc,cAAAC,EAAe,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,wCAE5CJ,CAAa;AAAA,4CACTD,CAAY,UAAUD,CAAI;AAAA;AAAA;AAAA;AAAA,0BAI5CG,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0BAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,YAK9B,EACA,KAAK,EAAE,EAERC,EAAkBR,CAAQ,CAC9B,CAEA,SAASQ,EAAkBR,EAAU,CACjC,MAAMS,EAAU,SAAS,cAAc,eAAe,EACtDA,EAAQ,UAAYT,EAEhBH,EACAA,EAAgB,QAAO,EAEvBA,EAAkB,IAAIa,EAAe,gBAAiB,CACtD,aAAc,MACd,aAAc,GACtB,CAAS,CAET,CC7CA,MAAMC,EAAgB,SAAS,cAAc,oBAAoB,EAC3DC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAc,SAAS,cAAc,cAAc,EAEzDF,EAAc,iBAAiB,QAASG,CAAY,EAEpD,eAAeA,EAAaC,EAAK,CAC/BA,EAAI,eAAc,EAClB,IAAIC,EAAc,SAAS,cAAc,sBAAsB,EAC3DC,EAAiB,SAAS,cAAc,eAAe,EACvDvB,EAAcsB,EAAY,MAAM,KAAI,EAExC,GAAItB,GAAe,EAAG,CACpBwB,EAAS,KAAK,CACZ,MAAO,QACP,QACE,2EACF,MAAO,KACb,CAAK,EACD,MACD,CAEDL,EAAY,MAAM,QAAU,OAE5B,GAAI,CACF,MAAMM,EAAO,MAAM1B,EAAOC,CAAW,EAErC,GAAIyB,EAAK,QAAU,EAAG,CACpBP,EAAK,UAAY,GACjBK,EAAe,UAAY,2BAA2BvB,CAAW,qBACjEwB,EAAS,KAAK,CACZ,MAAO,QACP,QACE,2EACF,gBAAiB,UACjB,aAAc,QACd,WAAY,QACpB,CAAO,EACD,MACD,CAEDpB,EAAkBqB,EAAK,IAAI,EAEzB,MAAMC,EAAgB,SAAS,iBAAiB,cAAc,EACxDC,EAAe,MAAM,KAAKD,CAAa,EAAE,IAAKE,GAC3C,IAAI,QAASC,GAAY,CAC9BD,EAAI,OAASC,EACbD,EAAI,QAAUC,CACxB,CAAS,CACF,EAED,QAAQ,IAAIF,CAAY,EACrB,KAAK,IAAM,CACV,QAAQ,IAAIA,CAAY,CAClC,CAAS,EACA,MAAOG,GAAQ,CACdX,EAAY,UAAY,GACxB,QAAQ,MAAMW,CAAG,CAC3B,CAAS,CAEN,OAAOA,EAAK,CACX,QAAQ,IAAIA,CAAG,CACnB,QAAW,CACL,QAAQ,IAAI,WAAW,EACvBX,EAAY,MAAM,QAAU,MAElC,CAAA"}